<!--<ng-container *ngIf= 'requestDetail$ | async as requestDetails'>-->

<!-- open / close request -->
<div class = 'module'>
    <!-- requestDetails.closed === null && ((isAdmin$ | async) ||
            isAssignedOnMe(requestDetails) || (requestDetails.creator.username === userStoreService.user.username )) -->
    <button mat-raised-button
            *ngIf = 'isOpen && enableChangeState'
            id = 'sliderButton'
            color='warn'
            class='customInput'
            (click) = 'changeState()'
            matTooltip="Stlačením tlačítka uzatvoríte požiadavku"
            matTooltipClass="custom-tooltip">
                Uzatvoriť
            </button>

    <button mat-raised-button
            *ngIf = '!isOpen'
            id = 'sliderButton'
            color='warn'
            class='customInput openInput'
            (click) = 'changeState()'
            matTooltip="Stlačením tlačítka otvoríte požiadavku"
            matTooltipClass="custom-tooltip">
                Otvoriť
    </button>
    <hr>
</div>

<!-- enable / disable commenting -->
<!-- *ngIf='requestDetails.closed === null && ((isAdmin$ | async) || isAssignedOnMe(requestDetails))' -->
<div class = 'module' *ngIf = 'isOpen && enableChangeCommenting'>
    <label class="switch"
            matTooltip="Stlačením tlačítka zakážete komentovanie požiadavky bežným uživateľom.
                        Komentovať budú môcť len uživatelia klasifikovaní ako riešitelia"
            matTooltipClass="custom-tooltip">
        <input class="switch-input" type="checkbox"  (click) = 'changeCommenting()' [checked] = "allowCommenting" />
        <span class="switch-label" data-on="Povolené komentovanie" data-off="Zakázané komentovanie"></span>
        <span class="switch-handle"></span>
    </label>
    <hr>
</div>

<!-- remove solver -->
<!-- *ngIf='requestDetails.closed === null  && (isAssignedOnMe(requestDetails) || (isAdmin$ | async))' -->
<div class = 'module'  *ngIf = 'isOpen && enableRemoveSolver'>
    <button mat-raised-button
            id = 'sliderButton'
            color='warn'
            class='customInput'
            (click) = 'removeSolver()'
            matTooltip="Stlačením tlačítka odstránite priradeného riešiteľa"
            matTooltipClass="custom-tooltip">
            Zmazať riešiteľa
    </button>
    <hr>
</div>

<!-- change solver -->
<!-- *ngIf = "requestDetails.closed === null &&  (
    ( ((isSolverRightHand$ | async) || (isManager$ | async)) &&
    (isSolver$ | async))  ||  (isAdmin$ | async))" -->
<div class = 'module' *ngIf = "isOpen && enableChangeSolver">
    <mat-form-field class='customInputSmall'>
        <mat-label>Zmena riešiteľa</mat-label>
        <mat-select  (selectionChange)="saveSolver($event.value)">
            <mat-option *ngFor='let user of availableUsers' [value] = "user">{{ user.firstName }} {{ user.lastName }}</mat-option>
        </mat-select>
    </mat-form-field>
    <button mat-raised-button
            class='sendingButton'
            (click) = 'changeSolver()'>
                Zmeniť
    </button>
    <hr>
</div>

<!-- change priority -->
<!-- *ngIf='requestDetails.closed === null && ((isSolver$ | async) || (isAdmin$ | async)) && isAssignedOnMe(requestDetails)' -->
<div class = 'module'  *ngIf = 'isOpen && enableChangePriority'>
    <mat-form-field class='customInputSmall'>
        <mat-label>Zmena priority</mat-label>
        <mat-select (selectionChange)="savePriority($event.value)">
            <mat-option value="nízka">nízka</mat-option>
            <mat-option value="stredná">stredná</mat-option>
            <mat-option value="vysoká">vysoká</mat-option>
        </mat-select>
    </mat-form-field>
    <button mat-raised-button
        class='sendingButton'
        (click) = 'changePriority()'>
            Zmeniť
    </button>
    <hr>
</div>

<!-- Report only, add evaluation -->
<!--*ngIf='requestDetails.closed === null &&
            requestDetails.requestType === "Report" &&
            ((isAssignedOnMe(requestDetails)) || (isAdmin$ | async))-->
<div class = 'module'  *ngIf = 'isOpen && enableEvaluation'>
    <mat-form-field class='customInputSmall'>
        <input  matInput placeholder="Nahodnocenie v dňoch" (keyup)="saveEvaluation($event.target.value)"  type="number">
    </mat-form-field>
    <button mat-raised-button  class='sendingButton' (click) = "addEvaluation()">Odoslať</button>
    <hr>
</div>
<!--</ng-container>-->
