
<div *ngFor = "let requestComment of requestComments" 
    [ngClass] = "requestComment.creator.username === userService.user.username ? 'floatRight' : 'floatLeft'"
    class="commentBox " >

    <div class='flex'>
        <!-- comment info -->
        <div class="commentBoxName" >
            <img [src]="'data:image/jpeg;base64,'+requestComment.creator.photoBytes" class='avatar' />
                {{ requestComment.creator.firstName }} {{ requestComment.creator.lastName }}<br>
              <div class='light'>  {{ requestComment.timestamp | date:'MMM d, y, HH:mm:ss '}}  </div>            
        </div>

        <!-- private comment info -->
        <div class="commentBoxName" *ngIf='requestComment.isPrivate' >
            <div class='light bigBold'> 
                Privátny komentár, zdieľané s : <br>
            </div>
            <div class='light'> 
                <span *ngFor='let groupName of requestComment.groupsToShare'> {{ groupName  }} </span>
            </div>     
        </div>

        <!-- solution flag -->
        <div class="commentBoxName" *ngIf='requestComment.id === (requestDetails$ | async).solutionComment' >
            <img src="../../../../assets/images_design/request_solution.png" id='solutionImg'/>
            <span id='solutionText'>Riešenie</span>   
        </div>

        <div class = 'commentIcons' 
            *ngIf='(requestComment.creator.username === userService.user.username || (isAdmin$ | async)) && 
                  (requestDetails$ | async).closed === null'>


            <img *ngIf='requestComment.isPrivate  &&  
                requestComment.id !== (requestDetails$ | async).solutionComment' 
                src="../../../../assets/images_design/share_icon.png" 
                class = 'icon'
                (click) = "changeFrames(requestComment)"
                matTooltip="Zdieľať"
                matTooltipPosition="right"
                matTooltipClass="custom-tooltip-icon"
                matTooltipShowDelay="200"/>

            <img *ngIf='requestComment.isPrivate  && 
                requestComment.id !== (requestDetails$ | async).solutionComment' 
                src="../../../../assets/images_design/lock_closed_icon.png" 
                class = 'icon' 
                (click) = "changeCommentPrivacy(requestComment)"
                matTooltip="Otvoriť"
                matTooltipPosition="right"
                matTooltipClass="custom-tooltip-icon"
                matTooltipShowDelay="200"/>
        
            <img *ngIf='!requestComment.isPrivate &&  
                requestComment.id !== (requestDetails$ | async).solutionComment' 
                src="../../../../assets/images_design/lock_open_icon.png" 
                class = 'icon' 
                (click) = "changeCommentPrivacy(requestComment)"
                matTooltip="Uzamknúť"
                matTooltipPosition="right"
                matTooltipClass="custom-tooltip-icon"
                matTooltipShowDelay="200" />
    

            <img src="../../../../assets/images_design/edit_icon.png" 
                class = 'icon' 
                (click) = "editComment(requestComment)" 
                matTooltip="Editovať"
                matTooltipPosition="right"
                matTooltipClass="custom-tooltip-icon"
                matTooltipShowDelay="200"/>

            <img src="../../../../assets/images_design/delete_bin_icon.png" 
                class = 'icon'  
                (click)='deleteComment(requestComment)'
                matTooltip="Vymazať"
                matTooltipPosition="right"
                matTooltipClass="custom-tooltip-icon"
                matTooltipShowDelay="200" />

           
        </div>
    </div>


    <p > {{requestComment.comment}} </p>

</div>


<div  class = 'displayCommentSharing' *ngIf="changeFramws" >
    <app-comment-sharing  (changeWindow) = "changeFrames(undefined)" (shareWithGroup) = "shareWith($event)"></app-comment-sharing>
</div>